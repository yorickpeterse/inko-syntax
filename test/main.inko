import std.env
import std.test.(Filter, Tests)

import syntax.lexer.test_fish
import syntax.lexer.test_inko
import syntax.lexer.test_make
import syntax.lexer.test_ruby
import syntax.lexer.test_shell
import syntax.test_format
import test_syntax

class async Main {
  fn async main {
    let tests = Tests.new

    test_fish.tests(tests)
    test_format.tests(tests)
    test_inko.tests(tests)
    test_make.tests(tests)
    test_ruby.tests(tests)
    test_shell.tests(tests)
    test_syntax.tests(tests)

    tests.filter = Filter.from_string(env.arguments.opt(0).unwrap_or(''))
    tests.run
  }
}
